<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>사망 행정처리 체크리스트 - 공무원 자녀용 포함</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .header h1 {
            color: #333;
            font-size: 28px;
            margin-bottom: 10px;
        }

        .header p {
            color: #666;
            font-size: 14px;
        }

        .filter-container {
            background: white;
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 20px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 8px 16px;
            border: 2px solid #667eea;
            background: white;
            color: #667eea;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .filter-btn.active {
            background: #667eea;
            color: white;
        }

        .progress-container {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .progress-bar {
            background: #e9ecef;
            height: 30px;
            border-radius: 15px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress-fill {
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            height: 100%;
            border-radius: 15px;
            transition: width 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .categories {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
        }

        .category-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .category-card:hover {
            transform: translateY(-5px);
        }

        .category-card.hidden {
            display: none;
        }

        .category-header {
            padding: 20px;
            color: white;
            position: relative;
        }

        .category-header.purple { background: linear-gradient(135deg, #667eea, #764ba2); }
        .category-header.green { background: linear-gradient(135deg, #11998e, #38ef7d); }
        .category-header.orange { background: linear-gradient(135deg, #f093fb, #f5576c); }
        .category-header.blue { background: linear-gradient(135deg, #4facfe, #00f2fe); }
        .category-header.yellow { background: linear-gradient(135deg, #fa709a, #fee140); }
        .category-header.red { background: linear-gradient(135deg, #f43b47, #453a94); }
        .category-header.teal { background: linear-gradient(135deg, #23d5ab, #23a6d5); }
        .category-header.indigo { background: linear-gradient(135deg, #5c258d, #4389a2); }

        .category-badge {
            display: inline-block;
            background: rgba(255,255,255,0.3);
            padding: 3px 10px;
            border-radius: 10px;
            font-size: 11px;
            margin-left: 10px;
        }

        .category-title {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .category-deadline {
            font-size: 14px;
            opacity: 0.9;
        }

        .category-progress {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(255,255,255,0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .checklist {
            padding: 20px;
        }

        .checklist-item {
            display: flex;
            align-items: flex-start;
            margin-bottom: 15px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .checklist-item:hover {
            background: #e9ecef;
        }

        .checklist-item.completed {
            background: #d4edda;
        }

        .checkbox {
            width: 20px;
            height: 20px;
            margin-right: 15px;
            cursor: pointer;
        }

        .checklist-text {
            flex: 1;
        }

        .checklist-title {
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }

        .checklist-desc {
            font-size: 13px;
            color: #666;
            line-height: 1.4;
        }

        .documents {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid #dee2e6;
        }

        .doc-tag {
            display: inline-block;
            padding: 3px 8px;
            background: #007bff;
            color: white;
            border-radius: 5px;
            font-size: 11px;
            margin-right: 5px;
            margin-top: 5px;
        }

        .deadline-warning {
            background: #fff3cd;
            color: #856404;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 12px;
            margin-top: 10px;
            display: inline-block;
        }

        .reset-button {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: #dc3545;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 16px;
            cursor: pointer;
            box-shadow: 0 5px 20px rgba(220,53,69,0.3);
            transition: all 0.3s ease;
        }

        .reset-button:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 30px rgba(220,53,69,0.4);
        }

        .save-indicator {
            position: fixed;
            top: 30px;
            right: 30px;
            background: #28a745;
            color: white;
            padding: 10px 20px;
            border-radius: 10px;
            display: none;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @media (max-width: 768px) {
            .categories {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 22px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🏛️ 사망 행정처리 체크리스트</h1>
            <p>사망 후 필요한 모든 행정절차를 체계적으로 관리하세요 (공무원 자녀 절차 포함)</p>
        </div>

        <div class="filter-container">
            <button class="filter-btn active" onclick="filterCategories('all')">🔍 전체보기</button>
            <button class="filter-btn" onclick="filterCategories('general')">👥 일반 절차</button>
            <button class="filter-btn" onclick="filterCategories('public')">👔 공무원 자녀 전용</button>
        </div>

        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-fill" id="progressBar">0%</div>
            </div>
            <p style="text-align: center; color: #666;">전체 진행률: <span id="progressText">0개 완료 / 0개 항목</span></p>
        </div>

        <div class="categories" id="categoriesContainer"></div>
    </div>

    <button class="reset-button" onclick="resetAll()">🔄 초기화</button>
    <div class="save-indicator" id="saveIndicator">✓ 자동 저장됨</div>

    <script>
        const checklistData = {
            death: {
                title: "사망신고",
                color: "purple",
                deadline: "1개월 이내",
                type: "general",
                items: [
                    {
                        title: "사망신고서 작성",
                        desc: "사망자의 본적지 또는 주소지 관할 읍·면·동사무소",
                        docs: ["사망진단서 3부", "신고인 도장", "신고인 신분증"]
                    },
                    {
                        title: "사망진단서 발급",
                        desc: "1개월 이내 신고 필수 (재적등본 발생)",
                        docs: ["사망진단서(시체검안서) 1부"]
                    },
                    {
                        title: "가족관계증명서 발급",
                        desc: "주민등록지 또는 인터넷 발급",
                        docs: ["신분증", "가족관계증명서"]
                    }
                ]
            },
            publicLeave: {
                title: "공무원 청원휴가",
                color: "teal",
                deadline: "즉시 신청",
                type: "public",
                items: [
                    {
                        title: "청원휴가 신청",
                        desc: "부모 사망 시 5일간 유급휴가 (배우자 부모 3일)",
                        docs: ["사망진단서", "가족관계증명서"],
                        warning: "토요일, 공휴일 포함하여 연속 계산"
                    },
                    {
                        title: "소속기관 보고",
                        desc: "직속상관 및 인사담당부서에 즉시 보고",
                        docs: ["유선보고 후 서면제출"]
                    },
                    {
                        title: "복무시스템 입력",
                        desc: "나라일터 또는 소속기관 복무시스템에 입력",
                        docs: ["온라인 신청"]
                    }
                ]
            },
            publicBenefit: {
                title: "공무원 복지/수당",
                color: "indigo",
                deadline: "1개월 이내",
                type: "public",
                items: [
                    {
                        title: "맞춤형복지 경조비 신청",
                        desc: "부모 사망 시 복지포인트 지급 (기관별 상이)",
                        docs: ["사망진단서", "가족관계증명서", "통장사본"],
                        warning: "기관별 10~50만 포인트 지급"
                    },
                    {
                        title: "부양가족 변경신고",
                        desc: "부양가족 등록 변경 및 가족수당 조정",
                        docs: ["가족관계증명서", "주민등록등본"]
                    },
                    {
                        title: "상조회 지원금 신청",
                        desc: "소속기관 상조회 경조금 신청",
                        docs: ["상조회 신청서", "사망진단서", "통장사본"],
                        warning: "기관별 50~200만원 지원"
                    }
                ]
            },
            inheritance: {
                title: "상속신고",
                color: "green",
                deadline: "3개월 이내",
                type: "general",
                items: [
                    {
                        title: "상속재산분할협의서 작성",
                        desc: "공동상속인 간 재산분할 협의",
                        docs: ["상속재산분할협의서", "인감도장"]
                    },
                    {
                        title: "상속인 가족관계증명서",
                        desc: "상속인 전원의 서류 준비",
                        docs: ["가족관계증명서", "등본", "초본", "인감증명서"]
                    },
                    {
                        title: "피상속인 서류 준비",
                        desc: "피상속인 관련 모든 서류",
                        docs: ["재적등본", "초본(말소자)", "제적초본"]
                    },
                    {
                        title: "상속세 신고",
                        desc: "주민등록지 관할 세무서",
                        docs: ["상속세신고서", "재산명세서"]
                    },
                    {
                        title: "한정승인/상속포기 검토",
                        desc: "채무가 많은 경우 3개월 이내 법원 신청",
                        docs: ["재산목록", "채무증빙서류"],
                        warning: "공무원은 재산신고 의무 확인"
                    }
                ]
            },
            vehicle: {
                title: "자동차 이전등록",
                color: "orange",
                deadline: "3개월 이내",
                type: "general",
                items: [
                    {
                        title: "자동차 소유 확인",
                        desc: "고인의 자동차 소유 여부 확인",
                        docs: ["자동차등록증"]
                    },
                    {
                        title: "이전등록 신고",
                        desc: "자동차 등록기관에 신고 (50만원 이하 과태료 주의)",
                        docs: ["자동차등록증", "자동차등록원부"]
                    },
                    {
                        title: "준비서류 작성",
                        desc: "상속인 관련 서류 준비",
                        docs: ["상속인 인감증명서", "가족관계증명서", "인감도장"]
                    }
                ]
            },
            pension: {
                title: "유족연금 신청",
                color: "blue",
                deadline: "5년 이내",
                type: "general",
                items: [
                    {
                        title: "국민연금 유족연금",
                        desc: "배우자→자녀→부모→손자녀→조부모 순",
                        docs: ["사망진단서", "가족관계증명서"],
                        warning: "국민연금공단 1355"
                    },
                    {
                        title: "공무원연금 유족연금",
                        desc: "부모가 공무원이었던 경우 확인",
                        docs: ["사망진단서", "가족관계증명서"],
                        warning: "공무원연금공단 1588-4321"
                    },
                    {
                        title: "사학연금 유족연금",
                        desc: "부모가 교직원이었던 경우",
                        docs: ["사망진단서", "가족관계증명서"],
                        warning: "사학연금 1588-4110"
                    },
                    {
                        title: "군인연금 유족연금",
                        desc: "부모가 직업군인이었던 경우",
                        docs: ["사망진단서", "가족관계증명서"],
                        warning: "국방부 1577-9090"
                    }
                ]
            },
            finance: {
                title: "금융거래 조회",
                color: "yellow",
                deadline: "조속히 처리",
                type: "general",
                items: [
                    {
                        title: "금융거래조회 신청",
                        desc: "금융감독원 소비자보호센터",
                        docs: ["사망진단서", "고인의 가족등록", "상속인 신분증"]
                    },
                    {
                        title: "예금 조회 및 인출",
                        desc: "각종 예금, 증권계좌, 가계대출 확인",
                        docs: ["가족관계증명서", "신분증"],
                        warning: "안심상속 원스톱 서비스 이용"
                    },
                    {
                        title: "보험금 청구",
                        desc: "생명보험, 손해보험 등 보험금 청구",
                        docs: ["보험증권", "사망진단서", "수익자 신분증"]
                    },
                    {
                        title: "대출금 및 채무 확인",
                        desc: "대출금, 신용카드, 보증채무 확인",
                        docs: ["부채관련 서류", "신용정보조회"]
                    },
                    {
                        title: "공무원 재산등록 변경",
                        desc: "공무원인 자녀는 재산변동사항 신고",
                        docs: ["재산등록시스템 입력"],
                        warning: "상속 후 1개월 이내 신고"
                    }
                ]
            },
            tax: {
                title: "세금 및 공과금",
                color: "red",
                deadline: "6개월 이내",
                type: "general",
                items: [
                    {
                        title: "상속세 신고납부",
                        desc: "사망일로부터 6개월 이내 신고",
                        docs: ["상속세신고서", "재산목록", "평가서류"],
                        warning: "지연 시 가산세 부과"
                    },
                    {
                        title: "취득세 신고납부",
                        desc: "상속 부동산 취득세 (상속일로부터 6개월)",
                        docs: ["취득세신고서", "등기부등본"]
                    },
                    {
                        title: "재산세 승계",
                        desc: "부동산 재산세 납부의무 승계",
                        docs: ["재산세 고지서 확인"]
                    },
                    {
                        title: "공과금 명의변경",
                        desc: "전기, 가스, 수도, 전화 등 명의변경",
                        docs: ["사망진단서", "가족관계증명서"]
                    }
                ]
            }
        };

        let completedItems = {};
        let currentFilter = 'all';

        function loadData() {
            const saved = localStorage.getItem('deathChecklistDataV2');
            if (saved) {
                completedItems = JSON.parse(saved);
            }
        }

        function saveData() {
            localStorage.setItem('deathChecklistDataV2', JSON.stringify(completedItems));
            showSaveIndicator();
        }

        function showSaveIndicator() {
            const indicator = document.getElementById('saveIndicator');
            indicator.style.display = 'block';
            setTimeout(() => {
                indicator.style.display = 'none';
            }, 2000);
        }

        function filterCategories(type) {
            currentFilter = type;
            
            // Update filter buttons
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Show/hide categories
            Object.keys(checklistData).forEach(category => {
                const card = document.getElementById(`category-${category}`);
                if (card) {
                    if (type === 'all' || checklistData[category].type === type) {
                        card.classList.remove('hidden');
                    } else {
                        card.classList.add('hidden');
                    }
                }
            });
        }

        function updateProgress() {
            let totalItems = 0;
            let completedCount = 0;

            Object.keys(checklistData).forEach(category => {
                // Only count visible categories
                if (currentFilter === 'all' || checklistData[category].type === currentFilter) {
                    checklistData[category].items.forEach((item, index) => {
                        totalItems++;
                        if (completedItems[`${category}-${index}`]) {
                            completedCount++;
                        }
                    });
                }
            });

            const percentage = totalItems > 0 ? Math.round((completedCount / totalItems) * 100) : 0;
            
            document.getElementById('progressBar').style.width = percentage + '%';
            document.getElementById('progressBar').textContent = percentage + '%';
            document.getElementById('progressText').textContent = `${completedCount}개 완료 / ${totalItems}개 항목`;

            // Update category progress
            Object.keys(checklistData).forEach(category => {
                let categoryCompleted = 0;
                let categoryTotal = checklistData[category].items.length;
                
                checklistData[category].items.forEach((item, index) => {
                    if (completedItems[`${category}-${index}`]) {
                        categoryCompleted++;
                    }
                });

                const categoryPercentage = Math.round((categoryCompleted / categoryTotal) * 100);
                const progressElement = document.getElementById(`progress-${category}`);
                if (progressElement) {
                    progressElement.textContent = categoryPercentage + '%';
                }
            });
        }

        function toggleItem(category, index) {
            const key = `${category}-${index}`;
            completedItems[key] = !completedItems[key];
            
            const itemElement = document.getElementById(`item-${key}`);
            if (completedItems[key]) {
                itemElement.classList.add('completed');
            } else {
                itemElement.classList.remove('completed');
            }
            
            updateProgress();
            saveData();
        }

        function renderCategories() {
            const container = document.getElementById('categoriesContainer');
            container.innerHTML = '';

            Object.keys(checklistData).forEach(category => {
                const data = checklistData[category];
                const categoryHtml = `
                    <div class="category-card" id="category-${category}">
                        <div class="category-header ${data.color}">
                            <div class="category-title">
                                ${data.title}
                                ${data.type === 'public' ? '<span class="category-badge">공무원</span>' : ''}
                            </div>
                            <div class="category-deadline">⏰ ${data.deadline}</div>
                            <div class="category-progress" id="progress-${category}">0%</div>
                        </div>
                        <div class="checklist">
                            ${data.items.map((item, index) => {
                                const key = `${category}-${index}`;
                                const isCompleted = completedItems[key];
                                return `
                                    <div class="checklist-item ${isCompleted ? 'completed' : ''}" id="item-${key}">
                                        <input type="checkbox" 
                                               class="checkbox" 
                                               ${isCompleted ? 'checked' : ''}
                                               onchange="toggleItem('${category}', ${index})">
                                        <div class="checklist-text">
                                            <div class="checklist-title">${item.title}</div>
                                            <div class="checklist-desc">${item.desc}</div>
                                            ${item.docs && item.docs.length > 0 ? `
                                                <div class="documents">
                                                    📎 필요서류: 
                                                    ${item.docs.map(doc => `<span class="doc-tag">${doc}</span>`).join('')}
                                                </div>
                                            ` : ''}
                                            ${item.warning ? `
                                                <div class="deadline-warning">
                                                    ⚠️ ${item.warning}
                                                </div>
                                            ` : ''}
                                        </div>
                                    </div>
                                `;
                            }).join('')}
                        </div>
                    </div>
                `;
                container.innerHTML += categoryHtml;
            });
        }

        function resetAll() {
            if (confirm('모든 체크리스트를 초기화하시겠습니까? 이 작업은 되돌릴 수 없습니다.')) {
                completedItems = {};
                localStorage.removeItem('deathChecklistDataV2');
                renderCategories();
                updateProgress();
                alert('체크리스트가 초기화되었습니다.');
            }
        }

        // Initialize
        loadData();
        renderCategories();
        updateProgress();
    </script>
</body>
</html>
