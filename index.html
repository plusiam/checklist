<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì‚¬ë§ í–‰ì •ì²˜ë¦¬ ì²´í¬ë¦¬ìŠ¤íŠ¸ - ê³µë¬´ì› ìë…€ìš© í¬í•¨</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .header h1 {
            color: #333;
            font-size: 28px;
            margin-bottom: 10px;
        }

        .header p {
            color: #666;
            font-size: 14px;
        }

        .filter-container {
            background: white;
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 20px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 8px 16px;
            border: 2px solid #667eea;
            background: white;
            color: #667eea;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .filter-btn.active {
            background: #667eea;
            color: white;
        }

        .progress-container {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .progress-bar {
            background: #e9ecef;
            height: 30px;
            border-radius: 15px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress-fill {
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            height: 100%;
            border-radius: 15px;
            transition: width 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .categories {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
        }

        .category-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .category-card:hover {
            transform: translateY(-5px);
        }

        .category-card.hidden {
            display: none;
        }

        .category-header {
            padding: 20px;
            color: white;
            position: relative;
        }

        .category-header.purple { background: linear-gradient(135deg, #667eea, #764ba2); }
        .category-header.green { background: linear-gradient(135deg, #11998e, #38ef7d); }
        .category-header.orange { background: linear-gradient(135deg, #f093fb, #f5576c); }
        .category-header.blue { background: linear-gradient(135deg, #4facfe, #00f2fe); }
        .category-header.yellow { background: linear-gradient(135deg, #fa709a, #fee140); }
        .category-header.red { background: linear-gradient(135deg, #f43b47, #453a94); }
        .category-header.teal { background: linear-gradient(135deg, #23d5ab, #23a6d5); }
        .category-header.indigo { background: linear-gradient(135deg, #5c258d, #4389a2); }

        .category-badge {
            display: inline-block;
            background: rgba(255,255,255,0.3);
            padding: 3px 10px;
            border-radius: 10px;
            font-size: 11px;
            margin-left: 10px;
        }

        .category-title {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .category-deadline {
            font-size: 14px;
            opacity: 0.9;
        }

        .category-progress {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(255,255,255,0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .checklist {
            padding: 20px;
        }

        .checklist-item {
            display: flex;
            align-items: flex-start;
            margin-bottom: 15px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .checklist-item:hover {
            background: #e9ecef;
        }

        .checklist-item.completed {
            background: #d4edda;
        }

        .checkbox {
            width: 20px;
            height: 20px;
            margin-right: 15px;
            cursor: pointer;
        }

        .checklist-text {
            flex: 1;
        }

        .checklist-title {
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }

        .checklist-desc {
            font-size: 13px;
            color: #666;
            line-height: 1.4;
        }

        .documents {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid #dee2e6;
        }

        .doc-tag {
            display: inline-block;
            padding: 3px 8px;
            background: #007bff;
            color: white;
            border-radius: 5px;
            font-size: 11px;
            margin-right: 5px;
            margin-top: 5px;
        }

        .deadline-warning {
            background: #fff3cd;
            color: #856404;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 12px;
            margin-top: 10px;
            display: inline-block;
        }

        .reset-button {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: #dc3545;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 16px;
            cursor: pointer;
            box-shadow: 0 5px 20px rgba(220,53,69,0.3);
            transition: all 0.3s ease;
        }

        .reset-button:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 30px rgba(220,53,69,0.4);
        }

        .save-indicator {
            position: fixed;
            top: 30px;
            right: 30px;
            background: #28a745;
            color: white;
            padding: 10px 20px;
            border-radius: 10px;
            display: none;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @media (max-width: 768px) {
            .categories {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 22px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ›ï¸ ì‚¬ë§ í–‰ì •ì²˜ë¦¬ ì²´í¬ë¦¬ìŠ¤íŠ¸</h1>
            <p>ì‚¬ë§ í›„ í•„ìš”í•œ ëª¨ë“  í–‰ì •ì ˆì°¨ë¥¼ ì²´ê³„ì ìœ¼ë¡œ ê´€ë¦¬í•˜ì„¸ìš” (ê³µë¬´ì› ìë…€ ì ˆì°¨ í¬í•¨)</p>
        </div>

        <div class="filter-container">
            <button class="filter-btn active" onclick="filterCategories('all')">ğŸ” ì „ì²´ë³´ê¸°</button>
            <button class="filter-btn" onclick="filterCategories('general')">ğŸ‘¥ ì¼ë°˜ ì ˆì°¨</button>
            <button class="filter-btn" onclick="filterCategories('public')">ğŸ‘” ê³µë¬´ì› ìë…€ ì „ìš©</button>
        </div>

        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-fill" id="progressBar">0%</div>
            </div>
            <p style="text-align: center; color: #666;">ì „ì²´ ì§„í–‰ë¥ : <span id="progressText">0ê°œ ì™„ë£Œ / 0ê°œ í•­ëª©</span></p>
        </div>

        <div class="categories" id="categoriesContainer"></div>
    </div>

    <button class="reset-button" onclick="resetAll()">ğŸ”„ ì´ˆê¸°í™”</button>
    <div class="save-indicator" id="saveIndicator">âœ“ ìë™ ì €ì¥ë¨</div>

    <script>
        const checklistData = {
            death: {
                title: "ì‚¬ë§ì‹ ê³ ",
                color: "purple",
                deadline: "1ê°œì›” ì´ë‚´",
                type: "general",
                items: [
                    {
                        title: "ì‚¬ë§ì‹ ê³ ì„œ ì‘ì„±",
                        desc: "ì‚¬ë§ìì˜ ë³¸ì ì§€ ë˜ëŠ” ì£¼ì†Œì§€ ê´€í•  ìÂ·ë©´Â·ë™ì‚¬ë¬´ì†Œ",
                        docs: ["ì‚¬ë§ì§„ë‹¨ì„œ 3ë¶€", "ì‹ ê³ ì¸ ë„ì¥", "ì‹ ê³ ì¸ ì‹ ë¶„ì¦"]
                    },
                    {
                        title: "ì‚¬ë§ì§„ë‹¨ì„œ ë°œê¸‰",
                        desc: "1ê°œì›” ì´ë‚´ ì‹ ê³  í•„ìˆ˜ (ì¬ì ë“±ë³¸ ë°œìƒ)",
                        docs: ["ì‚¬ë§ì§„ë‹¨ì„œ(ì‹œì²´ê²€ì•ˆì„œ) 1ë¶€"]
                    },
                    {
                        title: "ê°€ì¡±ê´€ê³„ì¦ëª…ì„œ ë°œê¸‰",
                        desc: "ì£¼ë¯¼ë“±ë¡ì§€ ë˜ëŠ” ì¸í„°ë„· ë°œê¸‰",
                        docs: ["ì‹ ë¶„ì¦", "ê°€ì¡±ê´€ê³„ì¦ëª…ì„œ"]
                    }
                ]
            },
            publicLeave: {
                title: "ê³µë¬´ì› ì²­ì›íœ´ê°€",
                color: "teal",
                deadline: "ì¦‰ì‹œ ì‹ ì²­",
                type: "public",
                items: [
                    {
                        title: "ì²­ì›íœ´ê°€ ì‹ ì²­",
                        desc: "ë¶€ëª¨ ì‚¬ë§ ì‹œ 5ì¼ê°„ ìœ ê¸‰íœ´ê°€ (ë°°ìš°ì ë¶€ëª¨ 3ì¼)",
                        docs: ["ì‚¬ë§ì§„ë‹¨ì„œ", "ê°€ì¡±ê´€ê³„ì¦ëª…ì„œ"],
                        warning: "í† ìš”ì¼, ê³µíœ´ì¼ í¬í•¨í•˜ì—¬ ì—°ì† ê³„ì‚°"
                    },
                    {
                        title: "ì†Œì†ê¸°ê´€ ë³´ê³ ",
                        desc: "ì§ì†ìƒê´€ ë° ì¸ì‚¬ë‹´ë‹¹ë¶€ì„œì— ì¦‰ì‹œ ë³´ê³ ",
                        docs: ["ìœ ì„ ë³´ê³  í›„ ì„œë©´ì œì¶œ"]
                    },
                    {
                        title: "ë³µë¬´ì‹œìŠ¤í…œ ì…ë ¥",
                        desc: "ë‚˜ë¼ì¼í„° ë˜ëŠ” ì†Œì†ê¸°ê´€ ë³µë¬´ì‹œìŠ¤í…œì— ì…ë ¥",
                        docs: ["ì˜¨ë¼ì¸ ì‹ ì²­"]
                    }
                ]
            },
            publicBenefit: {
                title: "ê³µë¬´ì› ë³µì§€/ìˆ˜ë‹¹",
                color: "indigo",
                deadline: "1ê°œì›” ì´ë‚´",
                type: "public",
                items: [
                    {
                        title: "ë§ì¶¤í˜•ë³µì§€ ê²½ì¡°ë¹„ ì‹ ì²­",
                        desc: "ë¶€ëª¨ ì‚¬ë§ ì‹œ ë³µì§€í¬ì¸íŠ¸ ì§€ê¸‰ (ê¸°ê´€ë³„ ìƒì´)",
                        docs: ["ì‚¬ë§ì§„ë‹¨ì„œ", "ê°€ì¡±ê´€ê³„ì¦ëª…ì„œ", "í†µì¥ì‚¬ë³¸"],
                        warning: "ê¸°ê´€ë³„ 10~50ë§Œ í¬ì¸íŠ¸ ì§€ê¸‰"
                    },
                    {
                        title: "ë¶€ì–‘ê°€ì¡± ë³€ê²½ì‹ ê³ ",
                        desc: "ë¶€ì–‘ê°€ì¡± ë“±ë¡ ë³€ê²½ ë° ê°€ì¡±ìˆ˜ë‹¹ ì¡°ì •",
                        docs: ["ê°€ì¡±ê´€ê³„ì¦ëª…ì„œ", "ì£¼ë¯¼ë“±ë¡ë“±ë³¸"]
                    },
                    {
                        title: "ìƒì¡°íšŒ ì§€ì›ê¸ˆ ì‹ ì²­",
                        desc: "ì†Œì†ê¸°ê´€ ìƒì¡°íšŒ ê²½ì¡°ê¸ˆ ì‹ ì²­",
                        docs: ["ìƒì¡°íšŒ ì‹ ì²­ì„œ", "ì‚¬ë§ì§„ë‹¨ì„œ", "í†µì¥ì‚¬ë³¸"],
                        warning: "ê¸°ê´€ë³„ 50~200ë§Œì› ì§€ì›"
                    }
                ]
            },
            inheritance: {
                title: "ìƒì†ì‹ ê³ ",
                color: "green",
                deadline: "3ê°œì›” ì´ë‚´",
                type: "general",
                items: [
                    {
                        title: "ìƒì†ì¬ì‚°ë¶„í• í˜‘ì˜ì„œ ì‘ì„±",
                        desc: "ê³µë™ìƒì†ì¸ ê°„ ì¬ì‚°ë¶„í•  í˜‘ì˜",
                        docs: ["ìƒì†ì¬ì‚°ë¶„í• í˜‘ì˜ì„œ", "ì¸ê°ë„ì¥"]
                    },
                    {
                        title: "ìƒì†ì¸ ê°€ì¡±ê´€ê³„ì¦ëª…ì„œ",
                        desc: "ìƒì†ì¸ ì „ì›ì˜ ì„œë¥˜ ì¤€ë¹„",
                        docs: ["ê°€ì¡±ê´€ê³„ì¦ëª…ì„œ", "ë“±ë³¸", "ì´ˆë³¸", "ì¸ê°ì¦ëª…ì„œ"]
                    },
                    {
                        title: "í”¼ìƒì†ì¸ ì„œë¥˜ ì¤€ë¹„",
                        desc: "í”¼ìƒì†ì¸ ê´€ë ¨ ëª¨ë“  ì„œë¥˜",
                        docs: ["ì¬ì ë“±ë³¸", "ì´ˆë³¸(ë§ì†Œì)", "ì œì ì´ˆë³¸"]
                    },
                    {
                        title: "ìƒì†ì„¸ ì‹ ê³ ",
                        desc: "ì£¼ë¯¼ë“±ë¡ì§€ ê´€í•  ì„¸ë¬´ì„œ",
                        docs: ["ìƒì†ì„¸ì‹ ê³ ì„œ", "ì¬ì‚°ëª…ì„¸ì„œ"]
                    },
                    {
                        title: "í•œì •ìŠ¹ì¸/ìƒì†í¬ê¸° ê²€í† ",
                        desc: "ì±„ë¬´ê°€ ë§ì€ ê²½ìš° 3ê°œì›” ì´ë‚´ ë²•ì› ì‹ ì²­",
                        docs: ["ì¬ì‚°ëª©ë¡", "ì±„ë¬´ì¦ë¹™ì„œë¥˜"],
                        warning: "ê³µë¬´ì›ì€ ì¬ì‚°ì‹ ê³  ì˜ë¬´ í™•ì¸"
                    }
                ]
            },
            vehicle: {
                title: "ìë™ì°¨ ì´ì „ë“±ë¡",
                color: "orange",
                deadline: "3ê°œì›” ì´ë‚´",
                type: "general",
                items: [
                    {
                        title: "ìë™ì°¨ ì†Œìœ  í™•ì¸",
                        desc: "ê³ ì¸ì˜ ìë™ì°¨ ì†Œìœ  ì—¬ë¶€ í™•ì¸",
                        docs: ["ìë™ì°¨ë“±ë¡ì¦"]
                    },
                    {
                        title: "ì´ì „ë“±ë¡ ì‹ ê³ ",
                        desc: "ìë™ì°¨ ë“±ë¡ê¸°ê´€ì— ì‹ ê³  (50ë§Œì› ì´í•˜ ê³¼íƒœë£Œ ì£¼ì˜)",
                        docs: ["ìë™ì°¨ë“±ë¡ì¦", "ìë™ì°¨ë“±ë¡ì›ë¶€"]
                    },
                    {
                        title: "ì¤€ë¹„ì„œë¥˜ ì‘ì„±",
                        desc: "ìƒì†ì¸ ê´€ë ¨ ì„œë¥˜ ì¤€ë¹„",
                        docs: ["ìƒì†ì¸ ì¸ê°ì¦ëª…ì„œ", "ê°€ì¡±ê´€ê³„ì¦ëª…ì„œ", "ì¸ê°ë„ì¥"]
                    }
                ]
            },
            pension: {
                title: "ìœ ì¡±ì—°ê¸ˆ ì‹ ì²­",
                color: "blue",
                deadline: "5ë…„ ì´ë‚´",
                type: "general",
                items: [
                    {
                        title: "êµ­ë¯¼ì—°ê¸ˆ ìœ ì¡±ì—°ê¸ˆ",
                        desc: "ë°°ìš°ìâ†’ìë…€â†’ë¶€ëª¨â†’ì†ìë…€â†’ì¡°ë¶€ëª¨ ìˆœ",
                        docs: ["ì‚¬ë§ì§„ë‹¨ì„œ", "ê°€ì¡±ê´€ê³„ì¦ëª…ì„œ"],
                        warning: "êµ­ë¯¼ì—°ê¸ˆê³µë‹¨ 1355"
                    },
                    {
                        title: "ê³µë¬´ì›ì—°ê¸ˆ ìœ ì¡±ì—°ê¸ˆ",
                        desc: "ë¶€ëª¨ê°€ ê³µë¬´ì›ì´ì—ˆë˜ ê²½ìš° í™•ì¸",
                        docs: ["ì‚¬ë§ì§„ë‹¨ì„œ", "ê°€ì¡±ê´€ê³„ì¦ëª…ì„œ"],
                        warning: "ê³µë¬´ì›ì—°ê¸ˆê³µë‹¨ 1588-4321"
                    },
                    {
                        title: "ì‚¬í•™ì—°ê¸ˆ ìœ ì¡±ì—°ê¸ˆ",
                        desc: "ë¶€ëª¨ê°€ êµì§ì›ì´ì—ˆë˜ ê²½ìš°",
                        docs: ["ì‚¬ë§ì§„ë‹¨ì„œ", "ê°€ì¡±ê´€ê³„ì¦ëª…ì„œ"],
                        warning: "ì‚¬í•™ì—°ê¸ˆ 1588-4110"
                    },
                    {
                        title: "êµ°ì¸ì—°ê¸ˆ ìœ ì¡±ì—°ê¸ˆ",
                        desc: "ë¶€ëª¨ê°€ ì§ì—…êµ°ì¸ì´ì—ˆë˜ ê²½ìš°",
                        docs: ["ì‚¬ë§ì§„ë‹¨ì„œ", "ê°€ì¡±ê´€ê³„ì¦ëª…ì„œ"],
                        warning: "êµ­ë°©ë¶€ 1577-9090"
                    }
                ]
            },
            finance: {
                title: "ê¸ˆìœµê±°ë˜ ì¡°íšŒ",
                color: "yellow",
                deadline: "ì¡°ì†íˆ ì²˜ë¦¬",
                type: "general",
                items: [
                    {
                        title: "ê¸ˆìœµê±°ë˜ì¡°íšŒ ì‹ ì²­",
                        desc: "ê¸ˆìœµê°ë…ì› ì†Œë¹„ìë³´í˜¸ì„¼í„°",
                        docs: ["ì‚¬ë§ì§„ë‹¨ì„œ", "ê³ ì¸ì˜ ê°€ì¡±ë“±ë¡", "ìƒì†ì¸ ì‹ ë¶„ì¦"]
                    },
                    {
                        title: "ì˜ˆê¸ˆ ì¡°íšŒ ë° ì¸ì¶œ",
                        desc: "ê°ì¢… ì˜ˆê¸ˆ, ì¦ê¶Œê³„ì¢Œ, ê°€ê³„ëŒ€ì¶œ í™•ì¸",
                        docs: ["ê°€ì¡±ê´€ê³„ì¦ëª…ì„œ", "ì‹ ë¶„ì¦"],
                        warning: "ì•ˆì‹¬ìƒì† ì›ìŠ¤í†± ì„œë¹„ìŠ¤ ì´ìš©"
                    },
                    {
                        title: "ë³´í—˜ê¸ˆ ì²­êµ¬",
                        desc: "ìƒëª…ë³´í—˜, ì†í•´ë³´í—˜ ë“± ë³´í—˜ê¸ˆ ì²­êµ¬",
                        docs: ["ë³´í—˜ì¦ê¶Œ", "ì‚¬ë§ì§„ë‹¨ì„œ", "ìˆ˜ìµì ì‹ ë¶„ì¦"]
                    },
                    {
                        title: "ëŒ€ì¶œê¸ˆ ë° ì±„ë¬´ í™•ì¸",
                        desc: "ëŒ€ì¶œê¸ˆ, ì‹ ìš©ì¹´ë“œ, ë³´ì¦ì±„ë¬´ í™•ì¸",
                        docs: ["ë¶€ì±„ê´€ë ¨ ì„œë¥˜", "ì‹ ìš©ì •ë³´ì¡°íšŒ"]
                    },
                    {
                        title: "ê³µë¬´ì› ì¬ì‚°ë“±ë¡ ë³€ê²½",
                        desc: "ê³µë¬´ì›ì¸ ìë…€ëŠ” ì¬ì‚°ë³€ë™ì‚¬í•­ ì‹ ê³ ",
                        docs: ["ì¬ì‚°ë“±ë¡ì‹œìŠ¤í…œ ì…ë ¥"],
                        warning: "ìƒì† í›„ 1ê°œì›” ì´ë‚´ ì‹ ê³ "
                    }
                ]
            },
            tax: {
                title: "ì„¸ê¸ˆ ë° ê³µê³¼ê¸ˆ",
                color: "red",
                deadline: "6ê°œì›” ì´ë‚´",
                type: "general",
                items: [
                    {
                        title: "ìƒì†ì„¸ ì‹ ê³ ë‚©ë¶€",
                        desc: "ì‚¬ë§ì¼ë¡œë¶€í„° 6ê°œì›” ì´ë‚´ ì‹ ê³ ",
                        docs: ["ìƒì†ì„¸ì‹ ê³ ì„œ", "ì¬ì‚°ëª©ë¡", "í‰ê°€ì„œë¥˜"],
                        warning: "ì§€ì—° ì‹œ ê°€ì‚°ì„¸ ë¶€ê³¼"
                    },
                    {
                        title: "ì·¨ë“ì„¸ ì‹ ê³ ë‚©ë¶€",
                        desc: "ìƒì† ë¶€ë™ì‚° ì·¨ë“ì„¸ (ìƒì†ì¼ë¡œë¶€í„° 6ê°œì›”)",
                        docs: ["ì·¨ë“ì„¸ì‹ ê³ ì„œ", "ë“±ê¸°ë¶€ë“±ë³¸"]
                    },
                    {
                        title: "ì¬ì‚°ì„¸ ìŠ¹ê³„",
                        desc: "ë¶€ë™ì‚° ì¬ì‚°ì„¸ ë‚©ë¶€ì˜ë¬´ ìŠ¹ê³„",
                        docs: ["ì¬ì‚°ì„¸ ê³ ì§€ì„œ í™•ì¸"]
                    },
                    {
                        title: "ê³µê³¼ê¸ˆ ëª…ì˜ë³€ê²½",
                        desc: "ì „ê¸°, ê°€ìŠ¤, ìˆ˜ë„, ì „í™” ë“± ëª…ì˜ë³€ê²½",
                        docs: ["ì‚¬ë§ì§„ë‹¨ì„œ", "ê°€ì¡±ê´€ê³„ì¦ëª…ì„œ"]
                    }
                ]
            }
        };

        let completedItems = {};
        let currentFilter = 'all';

        function loadData() {
            const saved = localStorage.getItem('deathChecklistDataV2');
            if (saved) {
                completedItems = JSON.parse(saved);
            }
        }

        function saveData() {
            localStorage.setItem('deathChecklistDataV2', JSON.stringify(completedItems));
            showSaveIndicator();
        }

        function showSaveIndicator() {
            const indicator = document.getElementById('saveIndicator');
            indicator.style.display = 'block';
            setTimeout(() => {
                indicator.style.display = 'none';
            }, 2000);
        }

        function filterCategories(type) {
            currentFilter = type;
            
            // Update filter buttons
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Show/hide categories
            Object.keys(checklistData).forEach(category => {
                const card = document.getElementById(`category-${category}`);
                if (card) {
                    if (type === 'all' || checklistData[category].type === type) {
                        card.classList.remove('hidden');
                    } else {
                        card.classList.add('hidden');
                    }
                }
            });
        }

        function updateProgress() {
            let totalItems = 0;
            let completedCount = 0;

            Object.keys(checklistData).forEach(category => {
                // Only count visible categories
                if (currentFilter === 'all' || checklistData[category].type === currentFilter) {
                    checklistData[category].items.forEach((item, index) => {
                        totalItems++;
                        if (completedItems[`${category}-${index}`]) {
                            completedCount++;
                        }
                    });
                }
            });

            const percentage = totalItems > 0 ? Math.round((completedCount / totalItems) * 100) : 0;
            
            document.getElementById('progressBar').style.width = percentage + '%';
            document.getElementById('progressBar').textContent = percentage + '%';
            document.getElementById('progressText').textContent = `${completedCount}ê°œ ì™„ë£Œ / ${totalItems}ê°œ í•­ëª©`;

            // Update category progress
            Object.keys(checklistData).forEach(category => {
                let categoryCompleted = 0;
                let categoryTotal = checklistData[category].items.length;
                
                checklistData[category].items.forEach((item, index) => {
                    if (completedItems[`${category}-${index}`]) {
                        categoryCompleted++;
                    }
                });

                const categoryPercentage = Math.round((categoryCompleted / categoryTotal) * 100);
                const progressElement = document.getElementById(`progress-${category}`);
                if (progressElement) {
                    progressElement.textContent = categoryPercentage + '%';
                }
            });
        }

        function toggleItem(category, index) {
            const key = `${category}-${index}`;
            completedItems[key] = !completedItems[key];
            
            const itemElement = document.getElementById(`item-${key}`);
            if (completedItems[key]) {
                itemElement.classList.add('completed');
            } else {
                itemElement.classList.remove('completed');
            }
            
            updateProgress();
            saveData();
        }

        function renderCategories() {
            const container = document.getElementById('categoriesContainer');
            container.innerHTML = '';

            Object.keys(checklistData).forEach(category => {
                const data = checklistData[category];
                const categoryHtml = `
                    <div class="category-card" id="category-${category}">
                        <div class="category-header ${data.color}">
                            <div class="category-title">
                                ${data.title}
                                ${data.type === 'public' ? '<span class="category-badge">ê³µë¬´ì›</span>' : ''}
                            </div>
                            <div class="category-deadline">â° ${data.deadline}</div>
                            <div class="category-progress" id="progress-${category}">0%</div>
                        </div>
                        <div class="checklist">
                            ${data.items.map((item, index) => {
                                const key = `${category}-${index}`;
                                const isCompleted = completedItems[key];
                                return `
                                    <div class="checklist-item ${isCompleted ? 'completed' : ''}" id="item-${key}">
                                        <input type="checkbox" 
                                               class="checkbox" 
                                               ${isCompleted ? 'checked' : ''}
                                               onchange="toggleItem('${category}', ${index})">
                                        <div class="checklist-text">
                                            <div class="checklist-title">${item.title}</div>
                                            <div class="checklist-desc">${item.desc}</div>
                                            ${item.docs && item.docs.length > 0 ? `
                                                <div class="documents">
                                                    ğŸ“ í•„ìš”ì„œë¥˜: 
                                                    ${item.docs.map(doc => `<span class="doc-tag">${doc}</span>`).join('')}
                                                </div>
                                            ` : ''}
                                            ${item.warning ? `
                                                <div class="deadline-warning">
                                                    âš ï¸ ${item.warning}
                                                </div>
                                            ` : ''}
                                        </div>
                                    </div>
                                `;
                            }).join('')}
                        </div>
                    </div>
                `;
                container.innerHTML += categoryHtml;
            });
        }

        function resetAll() {
            if (confirm('ëª¨ë“  ì²´í¬ë¦¬ìŠ¤íŠ¸ë¥¼ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.')) {
                completedItems = {};
                localStorage.removeItem('deathChecklistDataV2');
                renderCategories();
                updateProgress();
                alert('ì²´í¬ë¦¬ìŠ¤íŠ¸ê°€ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.');
            }
        }

        // Initialize
        loadData();
        renderCategories();
        updateProgress();
    </script>
</body>
</html>
